{"version":3,"sources":["hoc/withRouter.js","hoc/withAuthNavigate.js","components/Dialogs/Dialogs.module.scss","components/Dialogs/Message/Message.module.css","components/Dialogs/User/User.module.css","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/Message/Message.jsx","components/Dialogs/User/User.jsx","components/Dialogs/User/UserContainer.jsx","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsContainer.jsx"],"names":["withRouter","Component","props","params","useParams","navigate","useNavigate","mapStateToPropsForNavigate","state","isAuth","auth","withAuthNavigate","NavigateComponent","this","React","connect","module","exports","Message","className","styles","item","message","AddMessageForm","sendMessage","formik","useFormik","initialValues","validationSchema","Yup","max","min","required","onSubmit","values","handleSubmit","form_message","Input","handleChange","errors","formSummaryError","touched","type","User","to","src","profile","photos","large","userPhoto","alt","avatar","UserContainer","userId","authorizedUserId","getUserProfile","refreshProfile","prevProps","prevState","snapshot","Preloader","compose","newMessageText","dialogsPage","getAuthorizedUserId","getIsAuth","dispatch","setActive","isActive","activeLink","Link","DialogItem","path","id","dialog","name","Dialogs","dialogsElements","dialogs","map","d","messagesElements","messages","m","isDark","dialogsItems_dark","dialogsItems_light","settings"],"mappings":"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","file":"static/js/3.dbe6be19.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\n\r\nexport const withRouter = (Component) => {\r\n  function ComponentWithRouter(props) {\r\n    return <Component {...props} params={useParams()} navigate={useNavigate()} />;\r\n  }\r\n  return ComponentWithRouter;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n//import { Navigate } from \"react-router-dom\";\r\n\r\nlet mapStateToPropsForNavigate = (state) => {\r\n  return {\r\n    isAuth: state.auth.isAuth,\r\n  };\r\n};\r\n\r\nexport const withAuthNavigate = (Component) => {\r\n  class NavigateComponent extends React.Component {\r\n    render() {\r\n      /*if (!this.props.isAuth) {\r\n        return <Navigate to=\"/login\" />;\r\n      }*/\r\n      return <Component {...this.props} />;\r\n    }\r\n  }\r\n  let ConnectedAuthNavigateComponent = connect(mapStateToPropsForNavigate)(NavigateComponent);\r\n  return ConnectedAuthNavigateComponent;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__3cP-q\",\"dialogsItems_dark\":\"Dialogs_dialogsItems_dark__1ezgc\",\"dialogsItems_light\":\"Dialogs_dialogsItems_light__1Q95c\",\"dialog\":\"Dialogs_dialog__EVirp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Message_item__27BAq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"User_item__GViAQ\",\"avatar\":\"User_avatar__2Co67\",\"message\":\"User_message__2fyqA\",\"form_message\":\"User_form_message__3t_5H\",\"formSummaryError\":\"User_formSummaryError__3gHAo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"DialogItem_dialog__1Q3Xp\",\"Link\":\"DialogItem_Link__3btdq\",\"activeLink\":\"DialogItem_activeLink__kZISL\"};","import React from \"react\";\r\nimport styles from \"./Message.module.css\";\r\n\r\nconst Message = (props) => {\r\n  return (\r\n    <div>\r\n      <div className={styles.item}>{props.message}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport styles from \"./User.module.css\";\r\nimport { useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { Input } from \"../../Common/FormControls/FormControls\";\r\nimport { Link } from \"react-router-dom\";\r\nimport userPhoto from \"../../../assets/images/user.jpg\";\r\nimport Preloader from \"../../Common/Preloader/Preloader\";\r\n\r\nconst AddMessageForm = ({ sendMessage }) => {\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      message: \"\",\r\n    },\r\n    validationSchema: Yup.object({\r\n      message: Yup.string().max(100, \"Must be 100 or less\").min(3, \"Must be 3 or more\").required(\"Required\"),\r\n    }),\r\n    onSubmit: (values) => {\r\n      sendMessage(values.message);\r\n      values.message = \"\";\r\n    },\r\n  });\r\n  return (\r\n    <form onSubmit={formik.handleSubmit} className={styles.form_message}>\r\n      {Input(\"message\", \"text\", \"Введите сообщение:\", formik.values.message, formik.handleChange)}\r\n      {formik.errors.message ? (\r\n        <p className={styles.formSummaryError}>{formik.touched.message && formik.errors.message}</p>\r\n      ) : null}\r\n      <div>\r\n        <button type=\"submit\">Send</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst User = (props) => {\r\n  return (\r\n    <div className={styles.item}>\r\n      <Link to=\"/profile\">\r\n        <img src={props.profile.photos.large || userPhoto} alt=\"\" className={styles.avatar} />\r\n      </Link>\r\n      <AddMessageForm {...props} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import { sendMessage } from \"../../../redux/dialogs-reducer\";\r\nimport User from \"./User\";\r\nimport { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { compose } from \"redux\";\r\nimport { withRouter } from \"../../../hoc/withRouter\";\r\nimport { getAuthorizedUserId, getIsAuth } from \"../../../redux/profile-selector\";\r\nimport { getUserProfile } from \"../../../redux/profile-reducer\";\r\nimport Preloader from \"../../Common/Preloader/Preloader\";\r\n\r\nclass UserContainer extends React.Component {\r\n  refreshProfile() {\r\n    let userId = this.props.params.userId;\r\n    if (!userId) {\r\n      userId = this.props.authorizedUserId;\r\n    }\r\n    this.props.getUserProfile(userId);\r\n  }\r\n  componentDidMount() {\r\n    this.refreshProfile();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.props.params.userId !== prevProps.params.userId) {\r\n      this.refreshProfile();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.profile) {\r\n      return <Preloader />;\r\n    }\r\n    return (\r\n      <div>\r\n        <User sendMessage={this.props.sendMessage} profile={this.props.profile} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    newMessageText: state.dialogsPage.newMessageText,\r\n    authorizedUserId: getAuthorizedUserId(state), //?\r\n    isAuth: getIsAuth(state), //?\r\n  };\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    sendMessage: (newMessageText) => {\r\n      dispatch(sendMessage(newMessageText));\r\n    },\r\n    getUserProfile: (userId) => {\r\n      dispatch(getUserProfile(userId));\r\n    },\r\n  };\r\n};\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps), withRouter)(UserContainer);\r\n","import React from \"react\";\r\nimport styles from \"./DialogItem.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst setActive = ({ isActive }) => (isActive ? styles.activeLink : styles.Link);\r\n\r\nconst DialogItem = (props) => {\r\n  let path = \"/dialogs/\" + props.id;\r\n  return (\r\n    <div className={styles.dialog}>\r\n      <NavLink to={path} className={setActive}>\r\n        {props.name}\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DialogItem;\r\n","import React from \"react\";\r\nimport styles from \"./Dialogs.module.scss\";\r\nimport Message from \"./Message/Message\";\r\nimport UserContainer from \"./User/UserContainer\";\r\nimport DialogItem from \"./DialogItem/DialogItem\";\r\n\r\nconst Dialogs = (props) => {\r\n  let dialogsElements = props.state.dialogs.map((d) => <DialogItem name={d.name} id={d.id} />);\r\n  let messagesElements = props.state.messages.map((m) => <Message message={m.message} />);\r\n  return (\r\n    <div className={styles.dialogs}>\r\n      <div className={props.isDark ? styles.dialogsItems_dark : styles.dialogsItems_light}>{dialogsElements}</div>\r\n      <div className={styles.dialog}>\r\n        <UserContainer profile={props.profile} />\r\n        <div className=\"messages\">{messagesElements}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialogs;\r\n","import Dialogs from \"./Dialogs\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { withAuthNavigate } from \"./../../hoc/withAuthNavigate\";\r\n\r\nlet DialogsContainer = (props) => {\r\n  return (\r\n    <div>\r\n      <Dialogs profile={props.profile} state={props.state} isDark={props.isDark} />\r\n    </div>\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    state: state.dialogsPage,\r\n    isDark: state.settings.isDark,\r\n  };\r\n};\r\n\r\nexport default compose(connect(mapStateToProps), withAuthNavigate)(DialogsContainer);\r\n"],"sourceRoot":""}